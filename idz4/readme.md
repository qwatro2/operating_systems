
# ИДЗ \#4
*Власов Николай Алексеевич, БПИ229*

## Общие комментарии
**Работа выполнена на 10 баллов**
Количество зон на острове передается в качестве аргументов командной строки сервера. \
Если неверно указать сигнатуру аргументов командной строки при запуске, в консоли появится подсказка.
### Как собрать и запускать
Собираю я с помощью набора команд:
```
g++ <folder>/server.cpp -o server -w
g++ <folder>/client.cpp -o client -w
```
Начиная с 6-7 к ним добавляется
```
g++ <folder>/monitor.cpp -o monitor -w
```

где \<folder> - папка с программами на соответсвтующую оценку (4-5, 6-7 или 8-10)

Раньше я расписывал, как можно удобно запускать несколько программ при помощи утилиты $tmux$, но недавно открыл для себя волшебное преимущество VS Code - возможность сделать Split Terminal. Это конечно не то же самое, но для наших задач отлично подходит. 

## Задание
### Вариант №32
Шайка пиратов под предводительством Джона Сильвера высадилась на берег Острова Сокровищ. Не смотря на добытую карту острова старого Флинта, местоположение сокровищ по-прежнему остается загадкой, поэтому искать клад приходится практически на ощупь. Так как Сильвер ходит на деревянной ноге, то самому бродить по джунглям ему не с руки. Джон Сильвер поделил остров на участки, а пиратов на небольшие группы. Каждой группе поручается искать клад на одном из участков, а сам Сильвер ждет на берегу. Пираты, обшарив свой учесток, возвращаются к Сильверу и докладывают о результатах. \
***Требуется создать клиент-серверное приложение, моделирующее действия Сильвера и пиратов.*** \
*Сильвер — сервер, группы пиратов — клиенты* \
***Примечание.*** Количество участков превышает число поисковых групп. \

## 4-5
#### Сервер
Пример запуска сервера на порте 8080, 15 секторами на острове и закопанном кладе в 15 секторе:
```
./server 8080 15 15
```
Сервер реализован на потоках, чтобы разграничить взаимодействие клиентов с общими ресурсами, используются мьютексы. Данные передаются через сокет.
#### Клиент
Клиент запускается после сервера с помощью команды
```
./client 127.0.0.1 8080
```

## 6-7.
На данную оценку добавлена программа $monitor.cpp$, которая отвечает за отображение текущего состояния карты острова.

Монитор запускается также после сервера с помощью команды:
```
./monitor 127.0.0.1 8080
```

## 8.
Добавлена возможность подключения нескольких мониторов, которые также можно в процессе отключить при помощи $Ctrl+C$ и переподключить указанной в п.6-7 командой.

## 10.
Код не изменился, изначально программа случайно спроектировалась так, что при отключении сервера при помощи $Ctrl+C$, все подключенные клиенты и мониторы завершаются.
